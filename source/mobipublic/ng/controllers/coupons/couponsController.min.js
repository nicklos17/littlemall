!function(){"use strict";var t=baseController.extend({init:function(t,o,n){this._super(t),o.getRequest(shopModuleConfig.domain+"/coupons/index").then(function(o){t.couponsList=[];var n=o.length,s=0;for(s;n>s;s++)t.couponsList[s]=o[s],t.couponsList[s].cr_info=JSON.parse(o[s].cr_info),o[s].cp_used_time>0?(t.couponsList[s].act=!1,t.couponsList[s].cp_status=2):3==t.couponsList[s].cp_status?t.couponsList[s].act=!1:1e3*o[s].cp_end_time-new Date<0?(t.couponsList[s].cp_status=0,t.couponsList[s].act=!1):1e3*o[s].cp_start_time-new Date>0?(t.couponsList[s].cp_status=-1,t.couponsList[s].act=!1):t.couponsList[s].act=!0},function(t){return!1}),t.doAct=function(t){return t?void n.path("/"):!1},t.page=2,t.more=!0,t.getMore=function(){o.getRequest(shopModuleConfig.domain+"/coupons/index?page="+t.page).then(function(o){if(0==o.length)t.more=!1;else{var n=o.length,s=0;for(s;n>s;s++)o[s].cr_info=JSON.parse(o[s].cr_info),o[s].cp_used_time>0?(o[s].act=!1,o[s].cp_status=2):3==o[s].cp_status?o[s].act=!1:1e3*o[s].cp_end_time-new Date<0?(o[s].cp_status=0,o[s].act=!1):1e3*o[s].cp_start_time-new Date>0?(o[s].cp_status=-1,o[s].act=!1):o[s].act=!0;t.couponsList=t.couponsList.concat(o),t.page++}},function(t){})}},defineListeners:function(){this._super()},destroy:function(){}});t.$inject=["$scope","uriServices","$location"],angular.module("controllers.coupons",[]).controller("couponsCtrl",t)}();