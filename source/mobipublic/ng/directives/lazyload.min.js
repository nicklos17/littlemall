!function(){"use strict";baseController.extend({init:function(t,n,e){this._attrs=e,this._super(t),t.ext=this._attrs.ext,t.type=this._attrs.type},defineListeners:function(){this._super()},destroy:function(){}});angular.module("directives.lazyload",[]).directive("bLazy",[function(){function t(t){return t.__uid||(t.__uid=""+ ++n)}var n=0;return{restrict:"C",controller:["$scope","$element",function(n,e){function i(){var n=angular.element(this),e=t(n);n.css("opacity",1),c.hasOwnProperty(e)&&delete c[e]}function r(t){var n,i,r=e[0].getBoundingClientRect(),o=t[0].getBoundingClientRect(),c=50;return o.bottom+c>=r.top&&o.top-c<=r.bottom&&(i=!0),o.right+c>=r.left&&o.left-c<=r.right&&(n=!0),n&&i}function o(){Object.keys(c).forEach(function(t){var n=c[t],e=n.iElement,i=n.iScope;r(e)&&e.attr("src",i.lazySrc)})}var c={};this.addImg=function(n,e,o){e.bind("load",i),n.$watch("lazySrc",function(){if(r(e))e.attr("src",n.lazySrc);else{var i=t(e);e.css({"background-color":"#fff",opacity:0,"-webkit-transition":"opacity 1s",transition:"opacity 1s"}),c[i]={iElement:e,iScope:n}}}),n.$on("$destroy",function(){e.unbind("load")})},e.bind("scroll",o),e.bind("resize",o)}]}}]).directive("lazySrc",[function(){return{restrict:"A",require:"^bLazy",scope:{lazySrc:"@"},link:function(t,n,e,i){i.addImg(t,n,e)}}}])}();